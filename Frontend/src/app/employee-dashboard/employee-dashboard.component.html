<app-navbar [userName]="employeeName"></app-navbar>

<app-submenu></app-submenu>

<!-- Hero Section (no margin-top) -->

<div
  class="hero-section text-white text-center position-relative d-flex flex-column justify-content-center align-items-center"
  style="
    background: url('/assets/employee.png') center center/cover no-repeat;

    height: 83vh;
  "
>
  <div
    class="position-absolute top-0 start-0 w-100 h-100"
    style="background-color: rgba(0, 0, 0, 0.6); z-index: 0"
  ></div>

  <div class="position-relative z-1 px-3">
    <h1 class="display-4 fw-bold">Join the Internal Job Marketplace</h1>

    <p class="lead mb-4">Find opportunities. Grow your career within.</p>

    <div
      class="d-flex justify-content-center gap-5 mb-4 fw-semibold fs-4 flex-wrap"
    >
      <div>
        <div class="text-white-50">Jobs posted so far</div>

        <div>{{ noOfJobs }}</div>
      </div>
    </div>

    <div class="d-flex gap-3 justify-content-center flex-wrap">
      <button
        (click)="scrollToBestFit()"
        class="btn btn-lg shadow"
        style="background-color: #0077b5; color: white"
      >
        <i class="bi bi-stars"></i> Best Fit
      </button>

      <button class="btn btn-outline-light btn-lg shadow" routerLink="/job">
        <i class="bi bi-briefcase"></i> Show all jobs
      </button>
    </div>

    <p class="mt-4 fs-5 fst-italic">
      Your next opportunity is already inside â€” take the leap.
    </p>
  </div>
</div>

<!-- Main content layout -->

<div class="container-fluid mt-4">
  <div class="row d-flex">
    <!-- BestFit Jobs - 55% -->

    <div class="pe-4" style="flex: 0 0 55%">
      <div class="card shadow-sm p-4 mb-4 h-100" id="bestfit-jobs">
        <h4 class="text-center border-bottom pb-3 mb-4">
          <i class="bi bi-briefcase-fill" style="color: #0077b5"></i> BestFit
          Jobs
        </h4>

        <div style="max-height: 500px; overflow-y: auto">
          <div class="d-flex flex-column gap-4">
            <div class="d-flex flex-column gap-4">
              <div
                class="card shadow-sm border-0 job-card hover-shadow"
                *ngFor="let job of getBestFitJobs()"
              >
                <div class="card-body">
                  <h5 class="card-title fw-bold">{{ job.title }}</h5>

                  <p class="card-text">
                    <strong>Location:</strong> {{ job.location }}<br />

                    <strong>Skills Required:</strong>

                    {{ job.skillsRequired?.join(", ") }}<br />

                    <strong>Match:</strong> {{ job.matchCount }} skill{{
                      job.matchCount > 1 ? "s" : ""
                    }}
                  </p>

                  <button
                    class="btn btn-outline-primary btn-sm"
                    (click)="viewJobDescription(job)"
                  >
                    <i class="bi bi-eye"></i> View Job
                  </button>
                </div>
              </div>

              <div
                *ngIf="getBestFitJobs().length === 0"
                class="text-muted text-center"
              >
                No best fit jobs found for your skills.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- On Demand Skills - 22.5% -->

    <div class="ps-4 pe-2" style="flex: 0 0 22.5%">
      <div class="card shadow-sm p-4 h-100">
        <h5 class="text-center border-bottom pb-3 mb-3">
          <i class="bi bi-person-gear text-info"></i> On Demand Skills
        </h5>

        <div style="max-height: 300px; overflow-y: auto">
          <ul class="list-group list-group-flush" id="skills-list">
            <!-- Skills dynamically injected -->

            <li
              *ngFor="let skill of onDemandSkills | slice : 0 : 5"
              class="list-group-item d-flex justify-content-between align-items-center"
              style="min-width: 0"
            >
              <span
                style="
                  flex-grow: 1;
                  overflow: hidden;
                  text-overflow: ellipsis;
                  white-space: nowrap;
                "
              >
                {{ skill.skill | titlecase }}
              </span>
              <span
                class="badge linkedin-badge rounded-pill"
                style="
                  padding: 0.25em 0.4em;
                  font-size: 0.75rem;
                  min-width: auto;
                "
                >{{ skill.count }}</span
              >
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Must Have Certifications - 22.5% -->

    <div class="ps-2" style="flex: 0 0 22.5%">
      <div class="card shadow-sm p-4 h-100">
        <h5 class="text-center border-bottom pb-3 mb-3">
          <i class="bi bi-mortarboard-fill text-success"></i> On-Demand
          Certifications
        </h5>

        <div style="max-height: 300px; overflow-y: auto">
          <ul class="list-group list-group-flush" id="certifications-list">
            <!-- Certifications dynamically injected -->
            <li
              *ngFor="let cert of mustHaveCertifications | slice : 0 : 5"
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              <span
                style="
                  flex-grow: 1;
                  overflow: hidden;
                  text-overflow: ellipsis;
                  white-space: nowrap;
                "
              >
                {{ cert.certification | titlecase }}
              </span>
              <span
                class="badge linkedin-badge rounded-pill"
                style="
                  padding: 0.25em 0.4em;
                  font-size: 0.75rem;
                  min-width: auto;
                "
                >{{ cert.count }}</span
              >
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
